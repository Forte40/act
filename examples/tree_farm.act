%request,64,dirt,1
        ,64,saplings,2%
(s1 ?Bd Md (~Cd Dd Bd) Mu s2 Bd)=%plant%
(Dd (?Cu Mu)*=#h d#h)=%chop%
(s## ?Ic##>0)3,16 -- select next free slot

(
Mf3
(s## ?Ic>0)3,16=#a -- select free spot
Mf
(?Ic>0
  (?Ic>0 t##)#a=#b - consolidate and select
  s#b
  %chop%
)
)=%nexttree%

Mf4
(?Hf Df s0)


%nexttree%
(
  (
    %plant% / %nexttree%)4
    / r %nexttree% r
  )2 
  / l %nexttree% l
)2

Mf4 r Mf16 r